<div class="home-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-section">
    <online-banking-loading-spinner message="Loading your financial overview..." size="large"></online-banking-loading-spinner>
  </div>

  <!-- Content -->
  <div *ngIf="!loading" class="home-content">
    <!-- Welcome Section -->
    <div class="welcome-section">
      <div class="welcome-card">
        <div class="welcome-header">
          <fa-icon icon="sun" class="welcome-icon"></fa-icon>
          <div class="welcome-text">
            <h1>Good morning, {{ username }}!</h1>
            <p>Here's your financial overview for today</p>
          </div>
        </div>
        <div class="welcome-actions">
          <button mat-raised-button color="primary" routerLink="/transfers">
            <fa-icon icon="exchange-alt"></fa-icon>
            Make a Transfer
          </button>
          <button mat-stroked-button routerLink="/loans/apply">
            <fa-icon icon="hand-holding-usd"></fa-icon>
            Apply for Loan
          </button>
        </div>
      </div>
    </div>

    <!-- Account Summary Cards -->
    <div class="summary-section">
      <div class="summary-grid">
        <!-- Total Accounts Card -->
        <mat-card class="summary-card accounts-card">
          <mat-card-content>
            <div class="card-header">
              <fa-icon icon="wallet" class="card-icon"></fa-icon>
              <h3>Total Accounts</h3>
            </div>
            <div class="card-value">{{ totalAccounts }}</div>
            <div class="card-description">Active accounts</div>
          </mat-card-content>
        </mat-card>

        <!-- Total Savings Card -->
        <mat-card class="summary-card savings-card">
          <mat-card-content>
            <div class="card-header">
              <fa-icon icon="piggy-bank" class="card-icon"></fa-icon>
              <h3>Total Savings</h3>
            </div>
            <div class="card-value">${{ totalSavings }}</div>
            <div class="card-description">Available balance</div>
          </mat-card-content>
        </mat-card>

        <!-- Total Loans Card -->
        <mat-card class="summary-card loans-card">
          <mat-card-content>
            <div class="card-header">
              <fa-icon icon="hand-holding-usd" class="card-icon"></fa-icon>
              <h3>Total Loans</h3>
            </div>
            <div class="card-value">${{ totalLoan }}</div>
            <div class="card-description">Outstanding balance</div>
          </mat-card-content>
        </mat-card>

        <!-- Recent Transactions Card -->
        <mat-card class="summary-card transactions-card">
          <mat-card-content>
            <div class="card-header">
              <fa-icon icon="history" class="card-icon"></fa-icon>
              <h3>Recent Activity</h3>
            </div>
            <div class="card-value">{{ recentTransactionsCount }}</div>
            <div class="card-description">This month</div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Account Charts Section -->
    <div class="charts-section">
      <div class="charts-grid">
        <!-- Savings Overview -->
        <mat-card class="chart-card" *ngIf="savingsAccounts.length > 0">
          <mat-card-header>
            <mat-card-title>Savings Overview</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <online-banking-savings-overview-pie [savingsAccounts]="savingsAccounts"></online-banking-savings-overview-pie>
          </mat-card-content>
        </mat-card>

        <!-- Loan Overview -->
        <mat-card class="chart-card" *ngIf="loanAccounts.length > 0">
          <mat-card-header>
            <mat-card-title>Loan Overview</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <online-banking-loan-overview-pie [loanAccounts]="loanAccounts"></online-banking-loan-overview-pie>
          </mat-card-content>
        </mat-card>

        <!-- Share Overview -->
        <mat-card class="chart-card" *ngIf="shareAccounts.length > 0">
          <mat-card-header>
            <mat-card-title>Share Overview</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <online-banking-share-overview-pie [shareAccounts]="shareAccounts"></online-banking-share-overview-pie>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Quick Actions Section -->
    <div class="quick-actions-section">
      <h2>Quick Actions</h2>
      <div class="actions-grid">
        <button mat-card class="action-card" routerLink="/transfers">
          <fa-icon icon="exchange-alt"></fa-icon>
          <span>Internal Transfer</span>
        </button>
        
        <button mat-card class="action-card" routerLink="/tpt">
          <fa-icon icon="people-arrows"></fa-icon>
          <span>External Transfer</span>
        </button>
        
        <button mat-card class="action-card" routerLink="/beneficiaries">
          <fa-icon icon="user-friends"></fa-icon>
          <span>Manage Beneficiaries</span>
        </button>
        
        <button mat-card class="action-card" routerLink="/recent-transactions">
          <fa-icon icon="history"></fa-icon>
          <span>Transaction History</span>
        </button>
      </div>
    </div>
  </div>
</div>



